<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第三章测验：阴阳五行通识</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/scorm_api.js"></script>
    <script src="js/quiz.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>第三章测验：阴阳五行通识</h1>
        </header>

        <main>
            <form id="quizForm">
                <!-- Question 1 -->
                <div class="question">
                    <p class="question-text">1. 阴阳的根本特征是什么？</p>
                    <div class="options">
                        <label><input type="radio" name="q1" value="A"> A. 对立统一</label>
                        <label><input type="radio" name="q1" value="B"> B. 独立存在</label>
                        <label><input type="radio" name="q1" value="C"> C. 互不相干</label>
                        <label><input type="radio" name="q1" value="D"> D. 永恒不变</label>
                    </div>
                </div>

                <!-- Question 2 -->
                <div class="question">
                    <p class="question-text">2. 五行中，"水"生什么？</p>
                    <div class="options">
                        <label><input type="radio" name="q2" value="A"> A. 火</label>
                        <label><input type="radio" name="q2" value="B"> B. 木</label>
                        <label><input type="radio" name="q2" value="C"> C. 土</label>
                        <label><input type="radio" name="q2" value="D"> D. 金</label>
                    </div>
                </div>

                <!-- Question 3 -->
                <div class="question">
                    <p class="question-text">3. 五行相克关系中，"火"克什么？</p>
                    <div class="options">
                        <label><input type="radio" name="q3" value="A"> A. 水</label>
                        <label><input type="radio" name="q3" value="B"> B. 木</label>
                        <label><input type="radio" name="q3" value="C"> C. 金</label>
                        <label><input type="radio" name="q3" value="D"> D. 土</label>
                    </div>
                </div>

                <!-- Question 4 -->
                <div class="question">
                    <p class="question-text">4. "木"在五行中代表的方位是？</p>
                    <div class="options">
                        <label><input type="radio" name="q4" value="A"> A. 南方</label>
                        <label><input type="radio" name="q4" value="B"> B. 北方</label>
                        <label><input type="radio" name="q4" value="C"> C. 东方</label>
                        <label><input type="radio" name="q4" value="D"> D. 西方</label>
                    </div>
                </div>

                <!-- Question 5 -->
                <div class="question">
                    <p class="question-text">5. "金"在五行中的季节属性是？</p>
                    <div class="options">
                        <label><input type="radio" name="q5" value="A"> A. 春季</label>
                        <label><input type="radio" name="q5" value="B"> B. 夏季</label>
                        <label><input type="radio" name="q5" value="C"> C. 秋季</label>
                        <label><input type="radio" name="q5" value="D"> D. 冬季</label>
                    </div>
                </div>

                <!-- Question 6 -->
                <div class="question">
                    <p class="question-text">6. 阴阳共存的典型例子是？</p>
                    <div class="options">
                        <label><input type="radio" name="q6" value="A"> A. 白天和黑夜同时存在</label>
                        <label><input type="radio" name="q6" value="B"> B. 太极图中阴中有阳、阳中有阴</label>
                        <label><input type="radio" name="q6" value="C"> C. 男性和女性完全对立</label>
                        <label><input type="radio" name="q6" value="D"> D. 冷热互不相容</label>
                    </div>
                </div>

                <!-- Question 7 -->
                <div class="question">
                    <p class="question-text">7. 在中医理论中，五行生克关系主要用于？</p>
                    <div class="options">
                        <label><input type="radio" name="q7" value="A"> A. 诊断疾病和调理脏腑</label>
                        <label><input type="radio" name="q7" value="B"> B. 预测天气变化</label>
                        <label><input type="radio" name="q7" value="C"> C. 计算年龄</label>
                        <label><input type="radio" name="q7" value="D"> D. 确定方位</label>
                    </div>
                </div>

                <!-- Question 8 -->
                <div class="question">
                    <p class="question-text">8. "土"在五行中对应的脏腑是？</p>
                    <div class="options">
                        <label><input type="radio" name="q8" value="A"> A. 心</label>
                        <label><input type="radio" name="q8" value="B"> B. 肝</label>
                        <label><input type="radio" name="q8" value="C"> C. 脾</label>
                        <label><input type="radio" name="q8" value="D"> D. 肺</label>
                    </div>
                </div>

                <!-- Question 9 (True/False) -->
                <div class="question">
                    <p class="question-text">9. 阴阳是完全对立、互不转化的。</p>
                    <div class="options">
                        <label><input type="radio" name="q9" value="true"> 正确</label>
                        <label><input type="radio" name="q9" value="false"> 错误</label>
                    </div>
                </div>

                <!-- Question 10 (True/False) -->
                <div class="question">
                    <p class="question-text">10. 五行相生的顺序是：木生火、火生土、土生金、金生水、水生木。</p>
                    <div class="options">
                        <label><input type="radio" name="q10" value="true"> 正确</label>
                        <label><input type="radio" name="q10" value="false"> 错误</label>
                    </div>
                </div>
            </form>

            <div id="results" class="results"></div>

            <div class="button-group">
                <button id="submitBtn" class="btn btn-primary">提交答案</button>
                <button id="resetBtn" class="btn btn-secondary">重新测验</button>
                <button id="nextBtn" class="btn btn-success" style="display:none;">下一章节</button>
            </div>
        </main>
    </div>

    <script>
        // Quiz answers
        const answers = {
            q1: 'A',
            q2: 'B',
            q3: 'C',
            q4: 'C',
            q5: 'C',
            q6: 'B',
            q7: 'A',
            q8: 'C',
            q9: 'false',
            q10: 'true'
        };

        // Initialize quiz engine
        const quiz = new QuizEngine('quiz03', answers);

        // Submit button handler
        document.getElementById('submitBtn').addEventListener('click', function() {
            const form = document.getElementById('quizForm');
            const userAnswers = {};
            
            // Collect user answers
            for (let key in answers) {
                const selected = form.querySelector(`input[name="${key}"]:checked`);
                if (selected) {
                    userAnswers[key] = selected.value;
                }
            }

            // Grade the quiz
            const result = quiz.grade(userAnswers);
            
            // Display results
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <h2>测验结果</h2>
                <p class="score">得分: ${result.score}/${result.total} (${result.percentage}%)</p>
                <p class="status ${result.passed ? 'pass' : 'fail'}">
                    ${result.passed ? '✓ 通过测验！' : '✗ 未通过，请重新学习后再次测验。'}
                </p>
            `;
            resultsDiv.style.display = 'block';

            // Show/hide buttons based on result
            if (result.passed) {
                document.getElementById('nextBtn').style.display = 'inline-block';
            }

            // Disable form
            const inputs = form.querySelectorAll('input');
            inputs.forEach(input => input.disabled = true);
            this.disabled = true;
        });

        // Reset button handler
        document.getElementById('resetBtn').addEventListener('click', function() {
            const form = document.getElementById('quizForm');
            form.reset();
            
            // Enable form
            const inputs = form.querySelectorAll('input');
            inputs.forEach(input => input.disabled = false);
            
            // Hide results and next button
            document.getElementById('results').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('submitBtn').disabled = false;

            // Reset quiz tracking
            quiz.reset();
        });

        // Next button handler
        document.getElementById('nextBtn').addEventListener('click', function() {
            window.location.href = 'module04.html';
        });

        // Initialize SCORM on page load
        window.addEventListener('load', function() {
            quiz.initialize();
        });

        // Complete SCORM session on page unload
        window.addEventListener('beforeunload', function() {
            quiz.terminate();
        });
    </script>
</body>
</html>
